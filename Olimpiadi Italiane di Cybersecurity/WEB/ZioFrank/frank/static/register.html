<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>Zio Frank</title>
  </head>
  <body class="container-xl">
    <div class="login-container row">
      <form method="POST" action="register" class="login col-lg-6 offset-lg-3 col-md-6 offset-md-3 col-8 offset-2">
        <div class="row">
          <div class="col-md-8 offset-md-2 col-sm-10 offset-sm-1">
            <h1>Register</h1>
            <br/>
            <input id="username" name="username" type="text" class="form-control" placeholder="Username">
            <input id="password" name="password" type="password" class="form-control" placeholder="Password">
            <input id="password2" name="password2" type="password" class="form-control" placeholder="Repeat password">
            <button id="login" class="form-control btn btn-secondary">Register</button>

            <div id="error" class="alert alert-danger d-none" role="alert">Errore nella registrazione</div>
            <div id="passwordError" class="alert alert-danger d-none" role="alert">Le password non coincidono</div>
          </div>
        </div>
      </form>
    </div>

    <script>
      if(location.href.includes("?error")) {
        const el = document.getElementsById("error")
        el.classList.remove("d-none")
      }

      document.getElementsByTagName('form')[0].onsubmit = function(){
        const p1 = document.getElementById('password').value
        const p2 = document.getElementById('password2').value

        if(p1!==p2) {
          const el = document.getElementById("passwordError")
          el.classList.remove("d-none")
          return false
        }

        return true
      }
    </script>
</body>
</html>
